(function(){var APP=window.APP||{};APP.JSLoader=APP.JSLoader||function(){var prefix="../appweb/modules/";var execOnload=[];var evalOnLoad=[];var execDelay={},evalDelay={};var jsEval=function(code){if(window.execScript){window.execScript(code)}else{var fn=function(){window.eval.call(window,code)};fn()}};var processExternalScript=function(src,cb){if(!(/http\:\/\//.test(src))&&!(/^\//.test(src))){src=prefix+src}cb=cb||function(){};baidu.sio.callByBrowser(src,cb)};var processInternalScript=function(code,cb){jsEval(code);cb&&cb()};var getBoolAttribute=function(el,attr){var s=el.getAttribute(attr);return s=="true"||s=="1"||s=="yes"||s=="on"};var downloadScriptImage=function(url){var img=new Image();img.src=url};var downloadScriptObject=function(url){var obj=document.createElement("object");obj.data=url;obj.width=0;obj.height=0;document.body.appendChild(obj)};return{init:function(){var scripts=document.getElementsByTagName("script");for(var i=0,l=scripts.length;i<l;i++){var item=scripts[i];if(item.getAttribute("type")=="text/bdjs"){if(getBoolAttribute(item,"delay")){var id=item.getAttribute("id");if(!id){throw new Error("缓执行的脚本必须指定id")}var jssrc=item.getAttribute("bdsrc");if(jssrc&&jssrc.length){execDelay[item.getAttribute("id")]=jssrc}else{if(item.innerHTML){evalDelay[item.getAttribute("id")]=item.innerHTML}}}else{var jssrc=item.getAttribute("bdsrc");if(jssrc&&jssrc.length){execOnload.push(jssrc)}else{if(item.innerHTML){evalOnLoad.push(item.innerHTML)}}}}}baidu.each(execOnload,function(src){processExternalScript(src)});baidu.each(evalOnLoad,function(target){processInternalScript(target)});APP.JSLoader.prepareDelay()},prepareDelay:function(){for(var i in execDelay){var src=execDelay[i];if(baidu.browser.ie||baidu.browser.opera){downloadScriptImage(src)}else{downloadScriptObject(src)}}},require:function(id,callback){if(execDelay.hasOwnProperty(id)){var src=execDelay[id];processExternalScript(src,callback)}else{if(evalDelay.hasOwnProperty(id)){var code=evalDelay[id];processInternalScript(code,callback)}}}}}();baidu.dom.ready(function(){APP.JSLoader.init()});window.APP=APP})();var const_callback_list="login_success";(function(){var b="https://passport.baidu.com";var c="http://app.baidu.com";if(!window[const_callback_list]){window[const_callback_list]=[]}window.baiduLogin=window.baiduLogin||(function(){var g;var e=function(h){g=h};var f={tangram:(!baidu||!baidu.version||(baidu.version.indexOf("2.")!==0)),cache:true,apiOpt:{product:"app",staticPage:"http://app.baidu.com/static/06241840/appweb/scripts/popup_login/v3Jump.html",memberPass:true,u:"http://www.baidu.com"},forgetLink:"http://baidu.com/?1",registerLink:"http://baidu.com/?2",authsite:["tsina","renren","tqq"],onSubmitStart:function(h){},onLoginSuccess:function(p){p.returnValue=false;var o=p.rsp.data;var l={};l.username=decodeURIComponent(decodeURIComponent(o.userName));l.mail=decodeURIComponent(decodeURIComponent(o.mail));l.phonenumber=decodeURIComponent(decodeURIComponent(o.userName));var k=baidu.g("passInfo");window[const_callback_list].push(function(q){var s=q.username||q.mail||q.phonenumber;try{window.isLogin=true;window.bdUser=q.username;window.bdEmail=q.mail;window.bdPhonenumber=q.bdPhonenumber}catch(r){}if(k){k.innerHTML='<li><a href="https://passport.baidu.com/center" target="_blank"><b>'+s+'</b></a></li><li>|</li><li><a href="http://www.baidu.com" target="_blank">百度首页</a></li><li>|</li><li><a href="https://passport.baidu.com/?logout&tpl=app">退出</a></li>'}});if(g){g.call(window,l);g=null}for(var m=0,h=window[const_callback_list].length;m<h;m++){var n=window[const_callback_list][m];try{n.call(window,l)}catch(p){}}baiduLogin.instance.hide()}};var d=passport.pop.init(f);return{setCallback:e,instance:d}})();var a=baidu.g("lb");if(a){baidu.on(a,"click",function(d){loginCallback=null;baiduLogin.instance.show();baidu.event.preventDefault(d)})}window._invoke_login=function(d){baiduLogin.setCallback(d);baiduLogin.instance.show()};window.bdUsername=(function(){var d;var e=function(g){d=g};var f=function(h,g){g.username=decodeURIComponent(decodeURIComponent(g.username));g.mail=decodeURIComponent(decodeURIComponent(g.mail));g.phonenumber=decodeURIComponent(decodeURIComponent(g.phonenumber));if(d){d.call(window,h,g);d=null}try{isLogin=true;bdUser=g.username}catch(k){}if(bdUsername.renderStatus!="success"){bdUsername.renderStatus="success";bdUsername.box.update({height:200,contentText:'<div class="bdusername-tip-content"><span class="success"></span>您已成功填写用户名，请继续操作。<input type="button" id="pass_fillinusername_button" class="pass_fillinusername_button" value="确定" /></div>'});baidu.on("pass_fillinusername_button","click",function(l){bdUsername.box.close()});baidu.on("pass_fillinusername_button","mouseover",function(l){baidu.dom.addClass("pass_fillinusername_button","pass_fillinusername_button_hover")});baidu.on("pass_fillinusername_button","mouseout",function(l){baidu.dom.removeClass("pass_fillinusername_button","pass_fillinusername_button_hover")})}bdUsername.box.open()};return{setCallback:e,success:f}})();bdUsername.box=new baidu.ui.Dialog({classPrefix:"bdUsername",height:200,width:465,zIndex:10000,modal:true,autoRender:true,resizable:false,autoOpen:false,draggable:false,coverable:true,autoDispose:false});bdUsername.renderStatus="";window._invoke_username=function(d){if(bdUsername.renderStatus!="username"){bdUsername.renderStatus="username";bdUsername.box.update({height:200,contentText:'<iframe id="popUsernameIframe" name="popUsernameIframe" width="100%" height="100%" src="http://app.baidu.com/static/appweb/scripts/popup_login/fillinusername.html" scrolling="no" frameborder="0"></iframe>'})}bdUsername.setCallback(d);bdUsername.box.open()}})();(function(){var b=window.jfx||function(){};var a=function(d,f,c,e){this.id=d;this.dom=document.getElementById(d);this.target=f;this.order=parseInt(c);this.config=e;this.type="height";this.offset="offsetHeight";if(e.type){if(e.type=="width"){this.type="width";this.offset="offsetWidth"}}this._init()};a.prototype={_init:function(){var k=this,d=k.dom.getElementsByTagName(this.target),l=d.length,p=null,n=null,h=null,e=k.config.end,c=k.config.start;var m=cache={};m[k.id]=cache[k.id]=0;for(var g=l;g--;){if(g==k.order){d[g].style[k.type]=e+"px"}var f=d[g];f.index=g;f["on"+(k.config.trigger||"mouseover")]=function(){if(k.config.noclass){var t=new RegExp(k.config.noclass,"ig");if(t.test(this.className)){return}}var q=k._getBorder(this,k),o=this.index,u=6,r=0;if(m[k.id]==o){return}if(n){clearTimeout(n)}n=setTimeout(function(){if(p){clearInterval(p)}var s=cache[k.id];p=setInterval(function(){d[s].style[k.type]=k._tw(r,e,c-e,u)+"px";if(k.config.upCallback){k.config.upCallback(d[s])}d[o].style[k.type]=k._tw(r,c,(e-c),u)+"px";m[k.id]=o;if(k.config.downCallback){k.config.downCallback(d[o])}r++;if(r>u){r=0;clearInterval(p)}},10)},200);cache[k.id]=m[k.id]}}},_getBorder:function(c,d){return(d.type=="height"?(parseInt(d._getCss(c,"borderTopWidth"))||0)+(parseInt(d._getCss(c,"borderBottomWidth"))||0):(parseInt(d._getCss(c,"borderLeftWidth"))||0)+(parseInt(d._getCss(c,"borderRightWidth"))||0))},_getCss:function(c,d){return(c.currentStyle?c.currentStyle[d]:document.defaultView.getComputedStyle(c,false)[d])},_tw:function(f,e,h,g){return Math.floor(h*((f=f/g-1)*f*f+1)+e)}};b.ui=function(){return{accordion:function(e,f,d,c){if(!e||!f||!document.getElementById(e)){return false}new a(e,f,d||0,c||{})}}}();window.jfx=new b()||{};window.jfx.ui=b.ui||{}})();(function(){function c(t,s){var r=[];for(param in t){r.push(param+"="+encodeURIComponent(t[param]))}if(r.length>0){s+="?"}return s+r.join("&")}function o(s,r){var u="log_"+(new Date()).getTime();var t=window[u]=new Image();t.onload=(t.onerror=function(){window[u]=null});t.src=c(s,r)+"&t="+(+new Date());t=null}var f=document.body.getAttribute("data-zone");var g=document.body.getAttribute("data-pos");var a=document.body.getAttribute("data-apikey");var m=document.getElementById("block1-outer");var b,n;if(m){b=m.getAttribute("data-uid");n=m.getAttribute("data-uname")}else{b="";n=""}function q(s){s.ck=window._ck;s.T=window._T;if(window.ps__pid__){opts.qid=window.ps__pid__}if(s.zone){var r=baidu.extend({pid:201,tid:7001,pj:"app",fm:"appas"},s);switch(s.zone){case"bdother":r.apikey=a;o(r,h);break;default:o(r,h)}}}window.zoneHandle=q;var h="http://nsclick.baidu.com/v.gif";function p(u){var v=baidu.event.get(u).target,r=v.tagName.toLowerCase(),t=true,A=pageid="",B="",x="",z="",y="",w="",C="";if(r=="a"||r=="i"||r=="img"||r=="span"||(r=="input"&&v.id=="sbtn")||(r=="div"&&(v.id=="openLight2a"||v.id=="openLight2"))){do{if(!A){A=v.getAttribute("data-appid")||""}if(!B){B=v.getAttribute("data-item")||""}if(!pageid){pageid=v.getAttribute("data-pageid")||""}if(!z){z=v.getAttribute("data-title")||""}if(r=="input"&&baidu.G("w")){y=encodeURIComponent(baidu.G("w").value)}if(!w){w=v.getAttribute("data-uid")||""}if(!C){C=v.getAttribute("data-uname")||""}if(v.getAttribute("data-zone")){t=false;var s={zone:v.getAttribute("data-zone"),item:B||"icon",pos:document.body.getAttribute("data-pos")||"index",pageid:pageid,title:z,kword:y||"",devid:w||"",devname:C||""};if(A){s.appid=A}q(s)}}while(t&&(v=v.parentNode)&&v.getAttribute)}}window.addUp=p;baidu.dom.ready(function(){baidu.on(document.body,"click",p)});var k=new Date().getTime();baidu.on(window,"load",function(){q({zone:f||"app-list",item:"mpageload",fm:"apppv",pos:g||"",url:window.location.href,devid:b||"",devname:n||""})});var e=1;baidu.on(window,"beforeunload",function(){var r=new Date().getTime();q({zone:f||"app-list",item:"pagequit",fm:"appjp",appid:document.body.getAttribute("data-appid")||"",pos:g||"",url:window.location.href,devid:b||"",devname:n||"",quit:r-k});e=0});baidu.on(window,"unload",function(){if(!e){return}var r=new Date().getTime();q({zone:f||"app-list",item:"pagequit",fm:"appjp",appid:document.body.getAttribute("data-appid")||"",pos:g||"",url:window.location.href,devid:b||"",devname:n||"",quit:r-k})});var l=/(\d+-[a-zA-Z\d]+(-\d+){2}-[a-f\d]+)/ig;var d=l.exec(document.location.href);if(d&&d[0]){o({pid:307,type:3071,desturl:document.referrer||"",sign:d[0]},h)}})();var App={};var GlobalEvent=new baidu.lang.Class();App.PPT=function(){var k=baidu.q("slideshow-small-list")[0].getElementsByTagName("li");var c=baidu.G("slideshowPre"),f=baidu.G("slideshowNext");if(!c){return}var h=baidu.q("slideshow-large-list")[0];var d,g=0,l=k.length;var e=false;var b=null;baidu.each(k,function(o,n){baidu.event.on(o,"mouseover",function(p){e=true;if(b){clearTimeout(b)}b=setTimeout(function(){m(n)},300)});baidu.event.on(o,"mouseout",function(p){e=false})});c.onclick=function(){var n=g==0?l-1:g-1;m(n)};f.onclick=function(){var n=g==(l-1)?0:g+1;m(n)};function m(n){g=n;baidu.each(k,function(p,o){baidu.removeClass(p,"current")});baidu.addClass(k[n],"current");if(d&&!d.disposed){d.end()}if(n==0){h.style.left=0+"px"}else{d=baidu.fx.moveTo(h,{x:-n*600},{interval:80})}}var a=setInterval(function(){if(e){return}g=(++g>=l)?0:g;m(g)},5000)};App.buildUrl=function(c,b){var a=[];for(param in c){a.push(param+"="+encodeURIComponent(c[param]))}if(a.length>0){b+="?"}return b+a.join("&")};App.changePagination=function(a,e,b,d){b=Number(b);if(d>1){var f=1;var c=[];c.push('<div class="pagination clearfix">');c.push('<a class="prev'+((b==1)?" hidden":"")+'" href="javascript:void(0)" onclick="'+e+"("+(b-1)+');" >上一页</a>');if(d<=5){for(f=1;f<=d;f++){c.push('<a class="item'+((f==b)?" current":"")+'" href="javascript:void(0)" onclick="'+e+"("+f+');" >'+f+"</a>")}}else{c.push('<a class="item'+((b==1)?" current":"")+'" href="javascript:void(0)" onclick="'+e+'(1);" >1</a>');if((d-b<4)&&(d>4)){c.push("<span>...</span>");for(f=(d-4);f<=d;f++){c.push('<a class="item'+((f==b)?" current":"")+'" href="javascript:void(0)" onclick="'+e+"("+f+');" >'+f+"</a>")}}else{if(b-3>=2){c.push("<span>...</span>");c.push('<a class="item" href="javascript:void(0)" onclick="'+e+"("+(b-1)+');" >'+(b-1)+"</a>");c.push('<a class="item current" href="javascript:void(0)" onclick="'+e+"("+b+');" >'+b+"</a>")}else{for(f=2;f<=4;f++){c.push('<a class="item'+((f==b)?" current":"")+'" href="javascript:void(0)" onclick="'+e+"("+f+');" >'+f+"</a>")}}if(d-b<4){for(f=b+1;f<=d;f++){c.push('<a class="item'+((f==b)?" current":"")+'" href="javascript:void(0)" onclick="'+e+"("+f+');" >'+f+"</a>")}}else{f=Math.max(b,4);c.push('<a class="item" href="javascript:void(0)" onclick="'+e+"("+(f+1)+');" >'+(f+1)+"</a>");c.push("<span>...</span>")}if(b!=d){c.push('<a class="item" href="javascript:void(0)" onclick="'+e+"("+d+');" >'+d+"</a>")}}}c.push('<a class="next'+((b==d)?" hidden":"")+'" href="javascript:void(0)" onclick="'+e+"("+(b+1)+');" >下一页</a>');c.push("</div>");baidu.g(a).innerHTML=c.join("")}else{baidu.g(a).innerHTML=""}};(function(){function a(c,b){this.interval=1000;this.one2two=true;baidu.object.extend(this,b);this.start(c)}baidu.object.extend(a.prototype,{start:function(b){var c=this;if(b>0){c.element.innerHTML=baidu.format(c.tpl,c.getTimeObject(b));c.timer=setTimeout(function(){c.start(b-c.interval)},c.interval)}else{c.finish&&c.finish()}},stop:function(){if(this.timer){clearTimeout(this.timer);this.timer=null}},getTimeObject:function(d){var b=1000;var e=60000;var h=3600000;var g=86400000;var m=Math.floor(d/g);var n=d%g;var k=Math.floor(n/h);var c=n%h;var f=Math.floor(c/e);var o=c%e;var l=Math.floor(o/b);return{days:this.change(m),hours:this.change(k),minutes:this.change(f),seconds:this.change(l),milliseconds:this.change(o%b)}},change:function(b){return(b<0||!this.one2two||b>9)?b:("0"+b)}});App.countDown=function(c,d,b){return new a(c,{element:d,tpl:b,finish:function(){this.start(24*60*60*1000)}})}})();App.dialog=function(c,b){var a={width:375,height:"auto",autoRender:true,modal:true,resizable:false,autoOpen:false,draggable:true,coverable:true,onclose:function(){}};baidu.extend(a,b);if(typeof(c)=="string"){a.contentText=baidu.format('<div class="app-tip">#{content}</div>',{content:c})}else{a.content=c}if(App.appDialog){}App.appDialog=new baidu.ui.Dialog(a);App.appDialog.open()};(function(){var a=baidu.lang.createClass(function(b){baidu.object.extend(this,b)},{className:"horizontal-slide"}).extend({initilize:function(){var b=this;b.left=0;b.offset=b.element.offsetWidth;b.moveElement=baidu.dom.children(b.element)[0];b.moveChildren=baidu.dom.children(b.moveElement);if(b.moveChildren.length==0){return false}b.width=b.moveChildren.length*b.moveChildren[0].offsetWidth;baidu.dom.setStyle(b.moveElement,"width",b.width);b.appendButton("previous");b.appendButton("next");baidu.on(b.previous,"click",function(c){b.move(b.offset);baidu.event.preventDefault(c)});baidu.on(b.next,"click",function(c){b.move(-b.offset);baidu.event.preventDefault(c)});b.changeButtonStatus();return b},appendButton:function(c){var b=document.createElement("a");b.className=c;b.href="###";baidu.dom.setAttr(b,"data-item",c);if(baidu.browser.ie){baidu.dom.setAttr(b,"hidefocus","true")}this.element.parentNode.appendChild(b);this[c]=b},changeButtonStatus:function(){var b=this;b.previous.className=(b.left<0)?"previous previous-able":"previous";b.next.className=(b.left-b.offset>-b.width)?"next next-able":"next"},move:function(d){var c=this;var b=c.left+d;if(b>0||b<=-c.width){return}if(c.fx&&!c.fx.disposed){c.fx.end()}c.left+=d;c.fx=baidu.fx.moveTo(c.moveElement,{x:c.left},{onafterfinish:function(){c.changeButtonStatus()}})}});App.horizontalSlide=function(b){var c=new a({element:baidu.g(b)});c.initilize();return c}})();App.loadScript=function(e,b,f){e._t=+new Date();var d=dal._build_url(e,b);var c=document.getElementsByTagName("head")[0];var a=document.createElement("script");a.type="text/javascript";a.charset="utf-8";a.src=d;a.onload=a.onreadystatechange=function(){if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){f&&f();a.onload=a.onreadystatechange=null;if(c&&a.parentNode){c.removeChild(a)}}};c.insertBefore(a,c.firstChild)};var app=window.app||{};app.is_login=function(){return !!window.isLogin};app.fillinusername=function(a){_invoke_username(function(c,b){a(b)})};app.login=function(a){_invoke_login(function(b){if(b.username){a(b)}else{app.fillinusername(a)}})};(function(){window.add_keyword=function(){if(baidu.g("add-txt").value.replace(/(,|，|\s|0)/g,"")==""){baidu.g("op-info").innerHTML=window.appIndex.erroInfo[3];opInfoInit();return false}else{if(baidu.g("add-txt").value.length>30){baidu.g("op-info").innerHTML=window.appIndex.erroInfo[8];opInfoInit();return false}}if(this.locked){return false}this.locked=1;var li=baidu.g("manage-list").getElementsByTagName("li");var data=[];baidu.each(li,function(item){data.push(baidu.getAttr(item.getElementsByTagName("input")[0],"data-name"))});var _this=this;var temp='<li><div onclick="del_keyword.call(this)" class="del1"></div><input type="checkbox"data-name="#{allname}"><span>#{name}</span></li>';setManageList();var html=[baidu.g("manage-list").innerHTML];var addKey=baidu.trim(baidu.g("add-txt").value.replace(/(,|，){1,}/g,",")).split(",");baidu.array.remove(addKey,function(item){return(item==" ")||(item=="")});data=data.concat(addKey);baidu.each(data,function(item,index){data[index]=item.substr(0,30)});data=baidu.array.unique(data);data=data.slice(li.length,100);if(data.length==0){this.locked=0;baidu.g("op-info").innerHTML=window.appIndex.erroInfo[5];opInfoInit();return false}baidu.ajax.post("/store/mine/add_keyword","ie=utf8&bdstoken="+token+"&appid="+baidu.getAttr("add-bt","data-id")+"&keywords="+encodeURIComponent(data.join(",")),function(res){_this.locked=0;if(window.appIndex.dealRes(res.responseText)){baidu.g("op-info").innerHTML=window.appIndex.dealRes(res.responseText);opInfoInit();return false}var tempVar;for(var i=data.length-1,len=data.length;i>=0;i--){if(data[i]==""){continue}tempVar=(data[i].length>26)?data[i].substr(0,25)+"...":data[i];html.unshift(baidu.string.format(temp,{name:baidu.string.encodeHTML(tempVar),allname:baidu.string.encodeHTML(data[i])}))}baidu.g("manage-list").innerHTML=html.join("");baidu.g("sel-all").checked=false;baidu.g("add-txt").value="";autoResizeManageList();init_list();setManageMenu()});return false};window.del_keyword=function(a){if(this.locked){return false}this.locked=1;var _this=this;var list=baidu.g("manage-list").getElementsByTagName("input");var key=[];var dom=[];if((this.parentNode.nodeName.toLowerCase()=="li")&&baidu.getAttr(this.parentNode.getElementsByTagName("input")[0],"data-name")){key.push(encodeURIComponent(baidu.getAttr(this.parentNode.getElementsByTagName("input")[0],"data-name")));dom.push(this.parentNode)}else{if((a!=1)&&(a!=2)){baidu.each(list,function(item){if(item.checked){key.push(encodeURIComponent(baidu.getAttr(item,"data-name")));dom.push(item.parentNode)}})}else{if(a==2){this.locked=0;baidu.each(list,function(item){item.checked=false});return false}else{this.locked=0;baidu.each(list,function(item){item.checked=true});return false}}}if(key.length!=0){baidu.ajax.post("/store/mine/del_keyword","ie=utf8&bdstoken="+token+"&appid="+baidu.getAttr("add-bt","data-id")+"&keywords="+encodeURIComponent(key.join(",")),function(res){refresh(res,dom);_this.locked=0;if(baidu.dom.children(baidu.g("manage-list"))==""){baidu.g("sel-all").checked=false}setManageList();autoResizeManageList()})}else{this.locked=0}};window.appIndex={dealRes:function(data){if(!data.match(/\{errno:/g)){return false}var errno=eval("("+data+")");switch(errno.errno){case 0:return 0;break;case -1006:return"该标签已经添加";break;case -5666:return" ";break;case 1:setTimeout(function(){window.location.reload()},2000);return appIndex.erroInfo[1];break;default:return appIndex.erroInfo[1];break}},erroInfo:["标签不能为空或已添加","提交失败！","该标签已经添加","请检查您的输入，可包括汉字、数字、英文字符。","该应用尚未关联标签","标签已添加或该应用关联的标签超过上限","当前已关联的标签：","字符数超过上限，截取后标签已存在","您输入的标签不能超过30个字符"]};function refresh(res,dom){if(window.appIndex.dealRes(res.responseText)){baidu.g("op-info").innerHTML=window.appIndex.dealRes(res.responseText);return false}if(!baidu.lang.isArray(dom)){dom=[dom]}baidu.each(dom,function(item){item.parentNode.removeChild(item)})}function list_hover(item){baidu.on(item,"mouseover",function(){baidu.addClass(this,"hov");this.getElementsByTagName("div")[0].className="del2"});baidu.on(item,"mouseout",function(){baidu.removeClass(this,"hov");this.getElementsByTagName("div")[0].className="del1"})}function init_list(){if(baidu.g("manage-list")){var li=baidu.g("manage-list").getElementsByTagName("li");var input=baidu.g("manage-list").getElementsByTagName("input");baidu.each(li,list_hover);baidu.each(li,function(item){baidu.on(item.getElementsByTagName("input")[0],"click",function(){if(!this.checked){baidu.g("sel-all").checked=false;return}for(var i=0,len=input.length;i<len;i++){if(!input[i].checked){baidu.g("sel-all").checked=false;return}}baidu.g("sel-all").checked=true})})}}function opInfoInit(){clearTimeout(opInfoInit.timer);opInfoInit.timer=setTimeout(function(){baidu.g("op-info").innerHTML=""},4000)}function setManageMenu(){var l=baidu.g("manage-list").getElementsByTagName("li").length;if(l==0){baidu.dom.hide("sel-cont");baidu.dom.hide("manage-list")}else{if(l==1){baidu.dom.show("manage-list");baidu.dom.hide("sel-cont")}else{baidu.dom.show("manage-list");baidu.dom.show("sel-cont")}}}function setManageList(){var manageList=baidu.g("manage-list"),manageListParent=manageList.parentNode;if((manageListParent.getElementsByTagName("p")[0].innerHTML.indexOf(window.appIndex.erroInfo[4])!=-1)&&(manageList.getElementsByTagName("li").length==0)){manageListParent.getElementsByTagName("p")[0].innerHTML=window.appIndex.erroInfo[6]}else{if(manageList.getElementsByTagName("li").length==0){manageListParent.getElementsByTagName("p")[0].innerHTML=window.appIndex.erroInfo[4]}}setManageMenu()}autoResizeManageList=function(){if(window.isIE6){if(baidu.g("manage-list").getElementsByTagName("li").length>=9){baidu.setStyles("manage-list",{height:"230px"})}else{baidu.setStyles("manage-list",{height:"auto"})}}App.appDialog.update()};window.manageKeyword=function(){if(baidu.g("add-bt")){baidu.on(baidu.g("add-bt"),"click",add_keyword)}baidu.on(baidu.g("sel-all"),"click",function(){if(!this.checked){del_keyword.call(this,2)}else{del_keyword.call(this,1)}});baidu.on(baidu.g("sel-all2"),"click",function(){baidu.g("sel-all").checked=true;del_keyword.call(this,1)});baidu.on(baidu.g("del-sel"),"click",function(){del_keyword.call(this,3)});init_list()}})();var dal=app.dal={_query_cache:{},_build_url:function(c,b){var a=[];for(param in c){a.push(param+"="+encodeURIComponent(c[param]))}if(a.length>0){b+="?"}return b+a.join("&")},_get:function(params,url,onsuccess){var query=dal._build_url(params,url);if(query in dal._query_cache){onsuccess(dal._query_cache[query])}else{baidu.ajax.get(query,function(xhr,responseText){var response_data=eval("("+responseText+")");dal._query_cache[query]=response_data;onsuccess(response_data)})}},_sync_get:function(params,url){var query=dal._build_url(params,url);if(query in dal._query_cache){return dal._query_cache[query]}else{baidu.ajax.request(query,{async:false,onsuccess:function(xhr,responseText){var response_data=eval("("+responseText+")");dal._query_cache[query]=response_data}});return dal._query_cache[query]}},_load_script:function(e,b,f){if(dal._no_cache){e._t=+new Date();dal._no_cache=false}var d=dal._build_url(e,b);var c=document.getElementsByTagName("head")[0];var a=document.createElement("script");a.type="text/javascript";a.charset="utf-8";a.src=d;a.onload=a.onreadystatechange=function(){if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){f&&f();a.onload=a.onreadystatechange=null;if(c&&a.parentNode){c.removeChild(a)}}};c.insertBefore(a,c.firstChild)},send:function(a,d,c,e){var b=arguments.callee;window[c]=function(f){if(f.errno=="1"){app.login(function(){b(a,d,c,e)})}else{if(f.errno=="10"){app.fillinusername(function(){b(a,d,c,e)})}else{e(f)}}};dal._load_script(d,a)},add_app:function(a,c,b,e){var d={m:"addFav",tn:"rest_update_appweb",tpl:"rest_update_appweb",appid:a,bdstoken:c,t:+new Date()};if(b){d.w=b}dal.send("http://app.baidu.com/store/rest/updateserver",d,"app_addFav_callback",e)},del_app:function(a,b,d){var c={m:"rmFav",tn:"rest_update_appweb",tpl:"rest_update_appweb",appid:a,bdstoken:b,t:+new Date()};dal.send("http://app.baidu.com/store/rest/updateserver",c,"app_rmFav_callback",d)}};App.manage={del_app:function(d){if(d.locked){return}var b='<div class="app-tip-msg"><div class="app-authorize-confirm-text">确定要删除应用"#{content}"?</div></div>',a=d.parentNode.parentNode,c=baidu.format(b,{content:baidu.dom.getAttr(a,"data-name")});var e=baidu.dom.getAttr(a,"data-id");App.dialog(c,{width:385,buttons:{accept:{content:'<a href="javascript:void(0);" class="tips-button tips-button-green-short">删除</a>',onclick:function(h){var g=this,f=g.getParent();d.locked=1;dal.del_app(e,token,function(k){d.locked=0;a.parentNode.removeChild(a);var m=baidu.g("MyTotalApps"),l=Math.max(Number(m.innerHTML)-1,0);m.innerHTML=l;if(l==0){baidu.dom.hide("ManageButton")}});f.dispatchEvent("onaccept")&&f.close()}},cancel:{content:'<a href="javascript:void(0);" class="tips-button tips-button-gray-short">取消</a>',onclick:function(h){var g=this,f=g.getParent();f.dispatchEvent("oncancel")&&f.close()}}}})},edit:function(b){var a=b.parentNode.parentNode;baidu.ajax.get("/appweb/keyword_manage?id="+baidu.dom.getAttr(a,"data-id")+"&time="+(new Date().toString().replace(/(\s|:|\+)/g,"")),function(m){try{var h=baidu.json.parse(m.responseText.replace(/(^\s*)|(\s*$)/g,""));if(h&&h.errno){App.dialog('<div style="text-align:center;padding:30px;font-size:20px;">数据异常,稍候再试</div>',{width:430});return}}catch(l){App.dialog(m.responseText,{width:430});function g(){var d=f.value.replace(/\uff0c/g,",").replace(/,+/g,",");f.value=d;return d}var f=baidu.g("add-txt");var k=",";var c=baidu.q("app-tip-recommend-word",baidu.g("addKeyWords"));baidu.each(c,function(e,d){e.onclick=function(){var o=g();word=baidu.string.decodeHTML(e.innerHTML);var n=o.split(k);if(baidu.array.indexOf(n,word)==-1){if(o.length>0&&(o.lastIndexOf(k)!=(o.length-1))){word=k+word}f.value=o+word}f.focus();return false}});manageKeyword()}})}};App.PKRankList={_type:"new",switchType:function(a){if(App.PKRankList._type!=a){App.PKRankList._type=a;T.dom.toggleClass("BtnHotPK","btn-hot-new-pk-activted");T.dom.toggleClass("BtnNewPK","btn-hot-new-pk-activted")}if(a=="new"){T.g("BtnHotPK").style.marginRight="0px";T.g("BtnNewPK").style.marginLeft="5px"}else{T.g("BtnHotPK").style.marginRight="5px";T.g("BtnNewPK").style.marginLeft="0px"}App.PKRankList.getPage(1)},getPage:function(b){App.changePagination("PageBox","App.PKRankList.getPage",b,page_num);type=App.PKRankList._type;var a="getpkapplist?pn="+b+"&type="+type+"&time="+new Date().getTime();T.ajax.get(a,function(g,f){try{var c=T.json.parse(f.replace(/(^\s*)|(\s*$)/g,""));App.PKRankList.loadData(c)}catch(d){}})},loadData:function(c){var a=c.pk_top;var b=[];for(i=0;i<a.length;i++){if(!a[i].app_name){continue}if((i+1)%4==1){b.push('<div class="clearfix" style="margin-bottom:20px;">')}b.push('<div style="float:left;'+((i+1)%4!=1?"margin-left:16px;":"")+'">');b.push('<div class="app-single-container">');b.push('<div class="app-single-border"> </div>');b.push('<div style="float: left; width: 231px;">');b.push('<div class="app-single-container-app clearfix">');b.push('<dl class="app-single-item app-single-item-type app-single-item-pk-list">');b.push("<dt>");b.push('<a target="_blank" data-appid="'+a[i].app_id+'" href="/app/enter?appid='+a[i].app_id+'"><img alt="" src="'+a[i].app_logo+'"></a>');b.push('<a target="_blank" data-appid="'+a[i].app_id+'" href="/app/enter?appid='+a[i].app_id+'"><i class="app-single-round7" title="'+a[i].app_name+'"></i></a>');b.push("</dt>");b.push("<dd>");b.push(' <a class="app-name clearfix" title="'+a[i].app_name+'" target="_blank" data-appid="'+a[i].app_id+'" href="/app/enter?appid='+a[i].app_id+'">'+App.plugin.subByte(a[i].app_name,18,"...")+"</a>");b.push('<span class="app-single-grade"><i style="width:'+(a[i].score/5*100).toFixed()+'%;" data-grade="'+a[i].score+'"></i></span>');b.push("<p>"+App.PKRankList.showStatus(a[i],c.id2TotalUsed,c.nowtime)+"</p>");b.push("</dd></dl>");b.push("</div>");b.push('<div class="app-container-score clearfix">');if(!a[i].top_users||a[i].top_users.length==0){b.push('<div style="text-align:center;"><img src="http://webapp.bdimg.com/static/06241840/appweb/images/app_pk/no_pk.gif" alt="" /></div>')}else{b.push('<ol class="pk-rank-score-list">');for(j=0;j<a[i].top_users.length&&j<3;j++){b.push('<li class="rank-li-pk'+(j+1)+'">');b.push('<span class="rank-num rank-num-pk'+(j+1)+'">'+(j+1)+"</span>");b.push(' <a target="_blank" title="'+a[i].top_users[j].uname+'" href="'+a[i].top_users[j].bdspace_url+'"><img alt="" src="'+a[i].top_users[j].head_portrait+'">'+App.plugin.subByte(a[i].top_users[j].uname,13,"...")+"</a>");b.push('<span class="rank-score rank-score-pk'+(j+1)+'" title="'+App.PKRankList.formatNumber(a[i].top_users[j].score,{pattern:"###,###"})+'分">'+App.PKRankList.parseScore(a[i].top_users[j].score,{pattern:"###,###"})+'<em class="socre-fen">分</em></span>');b.push("</li>")}b.push("</ol>")}b.push("</div>");b.push("</div>");b.push('<div class="app-single-border" style="float: right;"> </div>');b.push("</div>");b.push("</div>");if((i+1)%4==0){b.push("</div>")}}if(c.length>0&&c.length%4!=0){b.push("</div>")}T.g("ListDataRender").innerHTML=b.join("")},_format:function(g,f,h){var d=g.length>=f.length?g.length:f.length;var a=g.split("");var b=f.split("");var c=true,m="";for(var e=0;e<d;e++){var l=b[b.length-d+e];var k=a[a.length-d+e];if(h==0){if(c){if((l&&k&&(l!="0"||k=="0"))||(l&&l!="0"&&!k)||(k&&k=="0"&&!l)){m+=l?l:"0";c=false}}else{m+=l?l:"0"}}else{if(k&&(k=="0"||(k=="#"&&l))){m+=l?l:"0"}}}return m},formatNumberCore:function(numChar,pattern){var patterns=pattern.split(".");var numChars=numChar.split(".");var z=patterns[0].indexOf(",")==-1?-1:patterns[0].length-patterns[0].indexOf(",");var num1=App.PKRankList._format(patterns[0].replace(","),numChars[0],0);var num2=App.PKRankList._format(patterns[1]?patterns[1].split("").reverse().join(""):"",numChars[1]?numChars[1].split("").reverse().join(""):"",1);num1=num1.split("").reverse().join("");var reCat=eval("/[0-9]{"+(z-1)+","+(z-1)+"}/gi");var arrdata=z>-1?num1.match(reCat):undefined;if(arrdata&&arrdata.length>0){var w=num1.replace(arrdata.join(""),"");num1=arrdata.join(",")+(w==""?"":",")+w}num1=num1.split("").reverse().join("");return(num1==""?"0":num1)+(num2!=""?"."+num2.split("").reverse().join(""):"")},formatNumber:function(b,c){var a=/[0#,.]{1,}/gi;var f=c.zeroExc==undefined?true:c.zeroExc;var e=c.pattern.match(a)[0];var d=b.toString();return !(f&&d==0)?c.pattern.replace(e,App.PKRankList.formatNumberCore(d,e)):c.pattern.replace(e,"0")},parseScore:function(a,b){return App.plugin.subByte(App.PKRankList.formatNumber(a,b),7,"...")},showStatus:function(h,a,f){if(App.PKRankList._type=="hot"){var d=a[h.app_id];var k=Math.floor(d/100000000);if(k>=1){return'<span class="app-single-amount"><strong>'+k+"</strong>亿</span>人参与PK"}k=Math.floor(d/10000);if(k>=1){return'<span class="app-single-amount"><strong>'+k+"</strong>万</span>人参与PK"}else{return'<span class="app-single-amount"><strong></strong></span>'}}else{var d=h.release_time;f=f;var e=f-d;if(e>604800){return"<strong></strong>"}var g=Math.floor(e/(24*3600));if(g>=1){return"<strong>"+g+" 天前</strong>上线"}var b=Math.floor(e/3600);if(b>=1){return"<strong>"+b+" 小时前</strong>上线"}var c=Math.floor(e/60);if(c>=1){return"<strong>"+c+" 分钟前</strong>上线"}return"<strong>"+e+" 秒前</strong>上线"}}};App.pkScroll=function(b){var c=b.parentNode;if(c.scrollHeight<=c.offsetHeight){return}var f=baidu.dom.children(b)[0].offsetHeight;var e=false,d;var g=setInterval(function(){if(e){return}c.scrollTop++;if(c.scrollTop==f){b.appendChild(baidu.dom.children(b)[0]);c.scrollTop=0}},40);function a(){}baidu.on(c,"mouseover",function(){a();e=true});baidu.on(c,"mouseout",function(){a();e=false})};App.plugin={subByte:function(c,a,b){c=String(c).replace(/<br[ ]*[\/]*>/gi,"");b=b||"";if(a<0||baidu.string.getByteLength(c)<=a){return c}a=a-baidu.string.getByteLength(b);c=c.substr(0,a).replace(/([^\x00-\xff])/g,"\x241 ").substr(0,a).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"\x241");return c+b},timeTransform:function(f,b){var e=Number(b)-Number(f);if(e>604800){return"7天前"}var c=Math.floor(e/(24*3600));if(c>=1){return"<strong>"+c+" 天前</strong>"}var a=Math.floor(e/3600);if(a>=1){return"<strong>"+a+" 小时前</strong>"}var d=Math.floor(e/60);if(d>=1){return"<strong>"+d+" 分钟前</strong>"}return"<strong>"+e+" 秒前</strong>"},unitTransform:function(a){a=Number(a);var c=100000000;if(a>c){return"<strong>"+Math.floor(a/c)+"</strong>亿"}var b=10000;if(a>b){return"<strong>"+Math.floor(a/b)+"</strong>万"}return"<strong>"+a+"</strong>"}};App.scrollWidget=function(b){if(!b.content){return}var l=baidu.g(b.previous),k=baidu.g(b.next),n=baidu.g(b.content),p=b.direction||"horizontal",h=b.offset,a=b.method,o=Math.ceil(p=="horizontal"?n.scrollWidth:n.scrollHeight)/h-1;if(b.__height__){o=Math.ceil(b.__height__/h)-1}var c=b.beginPos?b.beginPos:0;var m=Math.abs(c/h),f=p=="horizontal"?"x":"y",g;if(p=="horizontal"){n.scrollLeft=c}else{n.scrollTop=c}this.update=function(q){h=q};function e(){if(o<=0){return}if(m==0){baidu.removeClass(l,"previous-able")}else{if(!baidu.dom.hasClass(l,"previous-able")){baidu.addClass(l,"previous-able")}}if(m==o){baidu.removeClass(k,"next-able")}else{if(!baidu.dom.hasClass(k,"next-able")){baidu.addClass(k,"next-able")}}}function d(q){if(g&&!g.disposed){g.end()}var r={};r[f]=q*h*(a=="moveTo"?-1:1);g=baidu.fx[a](n,r,{onafterfinish:function(){m=q;e()}})}if(baidu.g(l)&&(!baidu.g(l)._onclick)){baidu.on(l,"click",function(q){this._onclick&&this._onclick(q)})}if(baidu.g(k)&&(!baidu.g(k)._onclick)){baidu.on(k,"click",function(q){this._onclick&&this._onclick(q)})}baidu.g(l)&&(baidu.g(l)._onclick=function(q){d(Math.max(0,(m-1)));baidu.event.preventDefault(q)});baidu.g(k)&&(baidu.g(k)._onclick=function(q){d(Math.min(o,(m+1)));baidu.event.preventDefault(q)});e();if(o<=0){baidu.dom.hide(l);baidu.dom.hide(k);return}return this};(function(){var e=window.baidu||{};var o=e.g("app-store-sug");var l=e.g("app-store-sug-tbody");var n=e.g("w");var d=e.g("searchForm");var p=-1;var f=1;var c=null;var h=null;var g=null;window.baidu.sug=function(r){if(!r){return}var q=r.s;if(q.length>0&&n.value==r.q){b(r.q,q);o.style.visibility="visible"}else{o.style.visibility="hidden"}};if(!n){return}e.event.on(n,"blur",function(q){c=setTimeout(function(){o.style.visibility="hidden"},500)});e.event.on(n,"keydown",function(t){if(c){clearTimeout(c);c=null}var q=window.event||t;var s=q.keyCode;var r=l.getElementsByTagName("li");if((38==s||63232==s)&&r.length>0){if(-1!=p){p=(--p+f)%f}else{p=f-1}a(p)}else{if((40==s||63233==s)&&r.length>0){if(-1!=p){p=++p%f}else{p=0}a(p)}else{p=-1;m(n.value)}}});if(document.all){e.event.on(n,"propertychange",function(q){if(-1==p){m(this.value)}e.event.preventDefault(q)})}else{e.event.on(n,"input",function(q){if(-1==p){m(this.value)}e.event.preventDefault(q||window.event)})}function b(s,v){var t='<li index="#{index}" style="color:black;font:14px arial;height:25px;line-height:25px;padding:0 8px;background-color:#ffffff;"><span>#{keyword}</span><b>#{other}</b></li>';var r=[];for(var u=0,q=v.length;u<q;u++){var w={};if(v[u].indexOf(s)==0){w.keyword=s;w.other=v[u].substr(s.length)}else{w.keyword=v[u];w.other=""}w.index=u;r.push(e.string.format(t,w))}v.push(s);r.push(e.string.format('<li style="display:none;">#{0}</li>',s));h=v;l.innerHTML=r.join("");p=-1;f=v.length;e.each(l.getElementsByTagName("li"),function(x,y){e.event.on(x,"mouseover",function(){k();p=y;this.style.backgroundColor="#e8e8e8"});e.event.on(x,"click",function(){n.value=h[y];d.submit()})})}function m(r){r=e.string.trim(r);if(g&&g==r){return}g=r;if(r.length>0){var q=e.string.format("http://nssug.baidu.com/su?wd=#{0}&prod=app",e.string.encodeHTML(r));e.sio.callByServer(q,e.sug,{charset:"gb2312"})}else{l.innerHTML="";o.style.visibility="hidden"}}function k(){var s=l.getElementsByTagName("li");for(var r=0,q=s.length;r<q;r++){s[r].style.backgroundColor="#ffffff"}}function a(q){k();var r=l.getElementsByTagName("li")[q];r.style.backgroundColor="#e8e8e8";n.value=h[q];o.style.visibility="visible"}})();App.tab=function(b,a){a=a||"mouseenter";baidu.each(baidu.dom.query("#"+b+" li"),function(d,c){baidu.event.on(d,a,function(f){baidu.each(baidu.dom.children(baidu.dom.getParent(d)),function(e,g){if(g!=c){baidu.removeClass(e,"current")}else{baidu.addClass(e,"current")}});GlobalEvent.dispatchEvent(("Tab:"+b).toLowerCase(),{index:c,element:d});baidu.event.preventDefault(f);return false})})};App.tabChangeListener=function(b){var a=baidu.dom.children("TabContent"+b);GlobalEvent.addEventListener(("Tab:"+b).toLowerCase(),function(c){if(a.length<0){return}baidu.each(a,function(d){if(d){baidu.dom.hide(d)}});if(a[c.index]){baidu.show(a[c.index])}})};